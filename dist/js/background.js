chrome.runtime.onInstalled.addListener((function(e){"install"==e.reason&&chrome.runtime.openOptionsPage()})),chrome.browserAction.onClicked.addListener((function(e){chrome.runtime.openOptionsPage()})),chrome.runtime.onMessage.addListener((function(e,o,r){e.book&&chrome.bookmarks.search(e.url,(function(r){var t=r.length>0;"check"!=e.book&&(t?chrome.bookmarks.remove(r[r.length-1].id):chrome.bookmarks.create({url:e.url,title:e.title}),t=!t),chrome.tabs.sendMessage(o.tab.id,{bookmarked:t})})),e.eruda&&chrome.tabs.sendMessage(o.tab.id,{action:"eruda_toggle"},(e=>{e&&e.success||(chrome.runtime.lastError.message,chrome.tabs.executeScript(o.tab.id,{file:"./src/js/eruda_init.js"}))})),e.closeThis&&chrome.tabs.remove(o.tab.id),e.copyToClip&&chrome.tabs.query({currentWindow:!0,active:!0},(function(e){var o=document.createElement("textarea");document.body.appendChild(o),o.value=e[0].url,o.focus(),o.select(),document.execCommand("Copy"),o.remove()})),e.chromeURL&&chrome.tabs.create({url:e.chromeURL}),e.newTabInc&&chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.windows.create({url:e[0].url,incognito:!0})})),e.settings&&chrome.runtime.openOptionsPage()}));